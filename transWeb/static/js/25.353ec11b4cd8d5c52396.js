webpackJsonp([25],{FcS9:function(t,e){},NRUI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("HzJ8"),s=n.n(r),a=n("4YfN"),o=n.n(a),i=n("0eBz"),c=n("0DTB"),l=n("M9A7"),u=n("fFvN"),f=n("sqAx"),h=n("SJI6"),d=n("fdFc"),p={name:"dispatchTaskTransferForm",data:function(){return{leftDropdownDataList:["退出登录"],leftDownShow:!1,liIndex:null,currentPerson:"",onlinePersonLlist:[],taskSurePng:n("WoXg"),taskCancelPng:n("faDW")}},components:{HeaderTop:i.a,NoData:f.a,FooterBottom:c.a},mounted:function(){var t=this;if(!Object(d.b)()){pushHistory(),this.gotoURL(function(){pushHistory(),t.$router.push({path:"/dispatchTask"}),t.changeTitleTxt({tit:"调度任务"}),Object(d.q)("currentTitle","调度任务")})}this.queryOnlineWorker({proId:this.proId,state:""})},computed:o()({},Object(h.mapGetters)(["dispatchTaskTransferIdList","navTopTitle","userInfo"]),{proId:function(){return this.userInfo.extendData.proId},workerId:function(){return this.userInfo.extendData.userId},workerName:function(){return this.userInfo.userName}}),methods:o()({},Object(h.mapMutations)(["changeTitleTxt"]),{queryOnlineWorker:function(t){var e=this;Object(l.a)(t).then(function(t){if(t&&200==t.data.code){e.onlinePersonLlist=[];var n=!0,r=!1,a=void 0;try{for(var o,i=s()(t.data.data);!(n=(o=i.next()).done);n=!0){var c=o.value,l=[];for(var u in c)"id"==u&&l.push(c[u]),"workerName"==u&&l.push(c[u]);e.onlinePersonLlist.push({text:l[1],value:l[0]})}}catch(t){r=!0,a=t}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}}}).catch(function(t){console.log(t)})},leftLiCLick:function(t){this.liIndex=t,localStorage.clear(),this.$router.push({path:"/"})},skipMyInfo:function(){this.leftDownShow=!this.leftDownShow},backTo:function(){this.$router.push({path:"/dispatchTask"}),this.changeTitleTxt({tit:"调度任务"}),Object(d.q)("currentTitle","调度任务")},sureTransferDispatchTask:function(t){var e=this;Object(u.H)(t).then(function(t){t&&200==t.data.code?e.$dialog.alert({message:t.data.msg,closeOnPopstate:!0}).then(function(){e.$router.push({path:"/dispatchTask"}),e.changeTitleTxt({tit:"调度任务"}),Object(d.q)("currentTitle","调度任务")}):e.$dialog.alert({message:t.data.msg,closeOnPopstate:!0}).then(function(){})}).catch(function(t){e.$dialog.alert({message:""+t.message,closeOnPopstate:!0}).then(function(){})})},transferPersonSure:function(){var t,e=this;(t=this.onlinePersonLlist.filter(function(t){return t.value==e.currentPerson})[0].text)!=this.workerName?this.sureTransferDispatchTask({taskIds:this.dispatchTaskTransferIdList,afterId:this.currentPerson,afterName:t,modifyId:this.workerId,modifyName:this.workerName}):this.$dialog.alert({message:"任务不能转移给自己",closeOnPopstate:!0}).then(function(){})},transferPersonCancel:function(){this.$router.push({path:"/dispatchTask"}),this.changeTitleTxt({tit:"调度任务"}),Object(d.q)("currentTitle","调度任务")}})},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-wrapper"},[n("HeaderTop",{attrs:{title:t.navTopTitle}},[n("van-icon",{attrs:{slot:"left",name:"arrow-left"},on:{click:t.backTo},slot:"left"})],1),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.leftDownShow,expression:"leftDownShow"}],staticClass:"left-dropDown"},t._l(t.leftDropdownDataList,function(e,r){return n("li",{key:r,class:{liStyle:t.liIndex==r},on:{click:function(e){return t.leftLiCLick(r)}}},[t._v(t._s(e))])}),0),t._v(" "),n("div",{staticClass:"sweep-code-title"},[n("h3",[t._v("在线的工作人员")]),t._v(" "),n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:t.onlinePersonLlist},model:{value:t.currentPerson,callback:function(e){t.currentPerson=e},expression:"currentPerson"}})],1)],1),t._v(" "),n("div",{staticClass:"btn-area"},[n("span",[n("img",{attrs:{src:t.taskSurePng,alt:""},on:{click:t.transferPersonSure}})]),t._v(" "),n("span",[n("img",{attrs:{src:t.taskCancelPng,alt:""},on:{click:t.transferPersonCancel}})])])],1)},staticRenderFns:[]};var T=n("C7Lr")(p,v,!1,function(t){n("FcS9")},"data-v-0b0731cb",null);e.default=T.exports}});