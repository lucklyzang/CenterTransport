webpackJsonp([26],{c7aL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4YfN"),n=a.n(i),s=a("0eBz"),o=a("0DTB"),c=a("fFvN"),r=a("sqAx"),l=a("NxGh"),d=a("SJI6"),u=a("fdFc"),h=(a("M9A7"),{name:"circulationTaskSweepCode",data:function(){return{leftDropdownDataList:["退出登录"],leftDownShow:!1,showLoadingHint:!1,liIndex:null,startPointList:[],taskCancelPng:a("faDW"),taskSweepCodePng:a("g5KD")}},components:{HeaderTop:s.a,NoData:r.a,Loading:l.a,FooterBottom:o.a},mounted:function(){var t=this;if(console.log("id"),!Object(u.b)()){pushHistory(),this.gotoURL(function(){t.changeIsrefreshCirculationConnectPage(!1),t.$router.push({path:"/circulationDetails"}),t.changeTitleTxt({tit:"任务详情"}),Object(u.q)("currentTitle","任务详情")})}this.echoOfficeList();var e=this;window.scanQRcodeCallback=function(t){e.scanQRcodeCallback(t)},window.scanQRcodeCallbackCanceled=function(){e.scanQRcodeCallbackCanceled()},this.sweepCodeSure()},computed:n()({},Object(d.mapGetters)(["navTopTitle","circulationTaskMessage","isCollectEnterSweepCodePage","stipulateOfficeList","arriveDepartmentId","circulationDetails"]),{proId:function(){return JSON.parse(Object(u.l)("userInfo")).extendData.proId},circulationId:function(){return this.circulationDetails.id}}),methods:n()({},Object(d.mapMutations)(["changeTitleTxt","changeStoreArriveDeparnmentId","changeIsrefreshCirculationConnectPage","changeVerifyCirculationOfficeId"]),{leftLiCLick:function(t){this.liIndex=t,localStorage.clear(),this.$router.push({path:"/"})},skipMyInfo:function(){this.leftDownShow=!this.leftDownShow},sweepAstoffice:function(){window.android.scanQRcode()},againSweepCode:function(){this.sweepAstoffice()},echoOfficeList:function(){this.startPointList=this.circulationDetails.spaces},backTo:function(){this.changeIsrefreshCirculationConnectPage(!1),this.$router.push({path:"/circulationDetails"}),this.changeTitleTxt({tit:"任务详情"}),Object(u.q)("currentTitle","任务详情")},scanQRcodeCallbackCanceled:function(){this.backTo()},scanQRcodeCallback:function(t){var e=this;if(t){var a=t.split("|");if(a.length>0){var i=a[0],n=a[1];this.arriveDepartmentId?(this.changeStoreArriveDeparnmentId(n),Object(u.q)("currentDepartmentId",n),this.changeIsrefreshCirculationConnectPage(!0),this.$router.push({path:"/circulationTaskMessageConnect"}),this.changeTitleTxt({tit:"循环信息交接"}),Object(u.q)("currentTitle","循环信息交接")):this.juddgeMedicalCorrect({id:this.circulationId,proId:this.proId,departmentNo:n,departmentId:i})}}else this.$dialog.alert({message:"当前没有扫描到任何信息,请重新扫描"}).then(function(){e.sweepAstoffice()})},sweepCodeSure:function(){this.sweepAstoffice()},juddgeMedicalCorrect:function(t){var e=this;this.showLoadingHint=!0,Object(c.r)(t).then(function(a){a&&200==a.data.code?(e.changeVerifyCirculationOfficeId(t.departmentNo),e.isCollectEnterSweepCodePage&&(e.$router.push({path:"/circulationTaskCollectMessage"}),e.changeTitleTxt({tit:"循环信息采集"}),Object(u.q)("currentTitle","循环信息采集"))):(e.backTo(),e.$dialog.alert({message:a.data.msg,closeOnPopstate:!0}).then(function(){}).catch(function(t){})),e.showLoadingHint=!1}).catch(function(t){e.backTo(),e.showLoadingHint=!1,e.$dialog.alert({message:""+t.message,closeOnPopstate:!0}).then(function(){})})},cancelSweepCode:function(){this.changeIsrefreshCirculationConnectPage(!1),this.$router.push({path:"/circulationDetails"}),this.changeTitleTxt({tit:"任务详情"}),Object(u.q)("currentTitle","任务详情")}})}),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[a("HeaderTop",{attrs:{title:t.navTopTitle}},[a("van-icon",{attrs:{slot:"left",name:"arrow-left"},on:{click:t.backTo},slot:"left"})],1),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.leftDownShow,expression:"leftDownShow"}],staticClass:"left-dropDown"},t._l(t.leftDropdownDataList,function(e,i){return a("li",{key:i,class:{liStyle:t.liIndex==i},on:{click:function(e){return t.leftLiCLick(i)}}},[t._v(t._s(e))])}),0),t._v(" "),a("div",{staticClass:"loading"},[a("loading",{attrs:{isShow:t.showLoadingHint,textContent:"校验中,请稍候····",textColor:"#2895ea"}})],1),t._v(" "),a("div",{staticClass:"sweep-code-area"},[a("div",{staticClass:"point-area"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.arriveDepartmentId,expression:"arriveDepartmentId == false"}],staticClass:"task-start-point"},[a("p",[t._v("任务起点:")]),t._v(" "),a("ul",t._l(t.startPointList,function(e,i){return a("li",{key:i},[t._v(t._s(e.text))])}),0)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.arriveDepartmentId,expression:"arriveDepartmentId == true"}],staticClass:"task-start-point"},[a("p",[t._v("请扫描标本送达的科室")])])])]),t._v(" "),a("div",{staticClass:"btn-area"},[a("span",[a("img",{attrs:{src:t.taskSweepCodePng,alt:""},on:{click:t.sweepCodeSure}})]),t._v(" "),a("span",[a("img",{attrs:{src:t.taskCancelPng,alt:""},on:{click:t.cancelSweepCode}})])])],1)},staticRenderFns:[]};var p=a("C7Lr")(h,f,!1,function(t){a("tJVG")},"data-v-035ca797",null);e.default=p.exports},tJVG:function(t,e){}});